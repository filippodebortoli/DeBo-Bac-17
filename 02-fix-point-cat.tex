\section{Fixed point theory for categories}

\begin{lem}
  Let \(\mathcal{C}\) be a category and \(F \colon \mathcal{C} \to \mathcal{C}\) an endofunctor.
  If \((A,\alpha)\) is an initial prefixed point of \(F\), then it is also an initial fixed point of \(F\).
\end{lem}
\begin{proof}
  Being \((A,\alpha)\) a prefixed point of \(F\), it follows that \((F(A),F(\alpha))\) --- where \(F(\alpha)\) goes from \(F(F(A))\) to \(F(A)\) --- is a prefixed point of \(F\).
  Moreover, thanks to the initiality of \((A,\alpha)\), we can consider the unique morphism \(f \colon (A,\alpha) \to (F(A),F(\alpha))\); both the cells of the diagram~\ref{02:diagram-1}
  \begin{figure}[!ht]
    \begin{center}
      \begin{tikzcd}
        F(A) \arrow[r, "F(f)"] \arrow[d, "\alpha"]
        & F(F(A)) \arrow[r, "F(\alpha)"] \arrow[d, "F(\alpha)"]
        & F(A) \arrow[d, "\alpha"]\\
        A \arrow[r, "f"] & F(A) \arrow[r, "\alpha"]& A
      \end{tikzcd}
    \end{center}
    \caption{The cell on the left commutes trivially; the right one, because \(\alpha\) is a morphism from \((F(A),F(\alpha))\) to \((A,\alpha)\). [\textbf{Da rivedere}]}
    \label{02:diagram-1}
  \end{figure}
  commute.
  Then, we can see that \(f\) is the inverse of \(\alpha\), since
  \begin{align}
    \alpha \circ f &= \mathrm{id}_A \\
    f \circ \alpha &= F(\alpha) \circ F(f) = F (\alpha \circ f) = F(\mathrm{id}_A) = \mathrm{id}_{F(A)}.
  \end{align}
  From this, we obtain that \((A,\alpha)\) is a fixed point of \(F\).
  Finally, we conclude that it is also initial: the category of fixed points of \(F\) is in fact a full subcategory of the category of prefixed points of \(F\).
\end{proof}

\paragraph{Da sistemare} qui ci starebbe bene un commento di introduzione al piatto forte della sezione\dots

\begin{thm}[initial fixed point theorem]
  Let \(\mathcal{C}\) be a complete category, \(F\) a continuous endofunctor of \(F\), and \(U\) an initial object of \(\mathcal{C}\). If \(u\) is the unique morphism from \(U\) to \(F(U)\), then
  \begin{equation}
    \Delta := \lbrace (F^n(U),F^n(u)) \rbrace_{n \in \mathbb{N}}
  \end{equation}
  is an \(\omega\)-chain, and for each colimit \((A,\mu)\) of \(\Delta\) there is a morphism \(\alpha \colon F(A) \to A\) such that \((A,\alpha)\) is an initial fixed point of \(F\).
\end{thm}
\begin{proof}
  To prove that \(\Delta\) is an \(\omega\)-chain, we show by induction on \(n \in \mathbb{N}\) that the morphism \(F^n(u)\) belongs to \(\hom(F^n(U),F^{n+1}(U))\).
  The induction basis is given by our hypothesis, indeed \(F^0(u) = u\) is a morphism from \(F^0(U) = U\) to \(F(U)\).
  Assuming now the inductive hypothesis for \(n \in \mathbb{N}\)
  \begin{align*}
    F^n(u) &\in \hom(F^n(U),F^{n+1}(U))
    \intertext{we can see that}
    F(F^n(u)) = F^{n+1}(u) &\in \hom(F^{n+1}(U),F^{(n+1)+1}(U)),
  \end{align*}
  and this makes the induction step proved.
  
  Now, let \((A,\lbrace \mu_n \rbrace_{n\in\mathbb{N}})\) be a colimit of \(\Delta\). Then,
  \begin{enumerate}
    \item \((A,\lbrace \mu_{n+1} \rbrace_{n\in\mathbb{N}})\) is a colimit of \(\lbrace (F^{n+1}(U), F^{n+1}(u))\rbrace_{n\in\mathbb{N}}\), and
    \item \((F(A), \lbrace F(\mu_n) \rbrace_{n \in \mathbb{N}})\) is a colimit of \(\lbrace (F^{n+1}(U), F^{n+1}(u)) \rbrace_{n \in \mathbb{N}}\), because
    \begin{equation*}
      F(\mu_n) = F(\mu_{n+1} \circ F^n(u)) = F(\mu_{n+1}) \circ F^{n+1}(U).
    \end{equation*}
  \end{enumerate}
  Colimits are unique up to isomorphism, thus there exists a unique mediating isomorphism \(\alpha \colon F(A) \to A\), and the object \((A,\alpha)\) is a fixed point of the endofunctor \(F\).
  
  \paragraph{Initality of \((A,\alpha)\).} Let \((B,\beta)\) be another fixed point of \(F\).
  Being \(B\) an object of \(\mathcal{C}\), there exists a unique morphism \(\nu_0 \colon U \to B\).
  For \(n \in \mathbb{N}\), we define \(\nu_{n+1} := \beta \circ F(\nu_n)\).
  Then, \((B,\lbrace \nu_n \rbrace_{n \in \mathbb{N}})\) is a co-cone for \(\Delta\). We show this to be true by induction on \(n \in \mathbb{N}\):
  \begin{description}
    \item[Basis case]
    \begin{equation}
      \nu_1 \circ F^0(u) = \beta \circ F(\nu_0) \circ u = \nu_0,
    \end{equation}
    thanks to the commutativity of the diagram~\ref{02:diagram-2}:
    \begin{figure}[!ht]
      \begin{center}
        \begin{tikzcd}
          U \arrow[r, "u"] \arrow[rrr, "\nu_0", bend right=30]
          & F(U) \arrow[r, "F(\nu_0)"]
          & F(B) \arrow[r, "\beta"]
          & B
        \end{tikzcd}
      \end{center}
      \caption{Both \(\beta \circ F(\nu_0) \circ u\) and \(\nu_0\) are morphisms from \(U\) to \(B\): being \(U\) initial, there is a unique arrow from \(U\) to \(B\), thus the equality of the morphisms.}
      \label{02:diagram-2}
    \end{figure}
    \item[Induction step] Assuming that \(\nu_n = \nu_{n+1} \circ F^n(u)\) holds for \(n \in \mathbb{N}\), we obtain
    \begin{equation*}
      \begin{split}
        \nu_{(n+1)+1} \circ F^{n+1}(U) &=
        \beta \circ F(\nu_{n+1}) \circ F^{n+1}(U)
        = \beta \circ F(\nu_{n+1} \circ F^n(U)) \\
        &= \beta \circ F(\nu_n) = \nu_{n+1}.
      \end{split}
    \end{equation*}
  \end{description}
  Thanks to the colimit property, being \((B,\lbrace \nu_n \rbrace_{n \in \mathbb{N}})\) a co-cone for \(\Delta\), there is a unique mediating morphism \(\xi\) such that
  \begin{equation*}
    \xi \colon A \to B \quad\text{and}\quad \forall n \in \mathbb{N}.\, \nu_n = \xi \circ \mu_n.
  \end{equation*}
  
  Next, we want to prove that \(\xi\) is also a morphism from \((A,\alpha)\) to \((B,\beta)\), and that it is the only one.
  
  Both \((A,\lbrace \mu_n \rbrace_{n \in \mathbb{N}})\) and \((B,\lbrace \nu_n \rbrace_{n \in \mathbb{N}})\) are co-cones for \(\Delta\), thus
  \begin{equation}
    \forall n \in \mathbb{N}.\,
    \begin{cases}
      \mu_{n+1} = \alpha \circ F(\mu_n) \\
      \nu_{n+1} = \beta \circ F(\nu_n).
    \end{cases}
  \end{equation}
  
  Then, for each positive integer \(n\),
  \begin{equation}
    \nu_{n+1} = \beta \circ F(\nu_n) = \beta \circ F(\xi) \circ F(\mu_n)
     = \beta \circ F(\xi) \circ \alpha^{-1} \circ \mu_{n+1}
  \end{equation}
  Moreover, as illustrated in Figure~\ref{02:diagram-3},
  \begin{equation}
    \nu_{0} = \beta \circ F(\xi) \circ \alpha^{-1} \circ \mu_{0}. 
  \end{equation}
  \begin{figure}[!ht]
    \begin{center}
      \begin{tikzcd}
        U \arrow[r, "\mu_0"] \arrow[rrrr, "\nu_0", bend right=30]
        & A \arrow[r, "\alpha^{-1}"]
        & F(A) \arrow[r, "F(\xi)"]
        & F(B) \arrow[r, "\beta"]
        & B
      \end{tikzcd}
    \end{center}
    \caption{Thanks to the initiality of \(U\), the illustrated diagram commutes.}
    \label{02:diagram-3}
  \end{figure}
  
  Being \(\xi\) the unique mediating morphism between the two considered co-cones, we get the equality
  \begin{equation}
    \label{eqn:asd}
    \xi = \beta \circ F(\xi) \circ \alpha^{-1};
  \end{equation}
  this implies that \(\xi\) is also a morphism of fixed points from \((A,\alpha)\) to \((B,\beta)\).
  
  \paragraph{Uniqueness of \(\xi\).} Let \(\lambda\) be another morphism of fixed points from \((A,\alpha)\) to \((B,\beta)\). Thanks to~\eqref{eqn:asd},
  \begin{align}
    \lambda \circ \alpha &= \beta \circ F(\lambda)
    \intertext{and}
    \lambda \circ \mu_0 &= (\lambda \circ \alpha) \circ \alpha^{-1} \circ \mu_0
    = \beta \circ F(\lambda) \circ \alpha^{-1} \circ \mu_0 = \nu_0.
  \end{align}
  Assuming now that \(\lambda \circ \mu_n = \nu_n\),
  \begin{equation}
    \begin{split}
      \lambda \circ \mu_{n+1} &= \lambda \circ \alpha \circ F(\mu_n) =
      \beta \circ F(\lambda) \circ F(\mu_n) \\
      &= \beta \circ F(\lambda \circ \mu_n) = \beta \circ F(\nu_n) = \nu_{n+1}.
    \end{split}
  \end{equation}
  Finally, for each \(n \in \mathbb{N}\),
  \begin{equation}
    \lambda \circ \mu_n = \nu_n \land \xi \circ \mu_n = \nu_n \implies
    \lambda = \xi.
  \end{equation}
\end{proof}